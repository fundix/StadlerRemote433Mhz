

void sendCommand(RCSwitch sender, int cmd) {
  
  const char* commands[5] = { "00001001", //ON/Off
                              "00001010", //Hydrostat
                              "00001011", //Output
                              "00001101", //Warm
                              "00001110", //Auto
                              
                             };
   sender.send(commands[cmd]);
  
}

void sendHumidity(RCSwitch sender, unsigned int hum) {

    #ifdef DEBUG
      Serial.print("Sending hum: ");
      Serial.print(hum);
      Serial.println("%");
    #endif

    if(hum < 25) hum = 25;
    if(hum > 79) hum = 79;

    char word1[] = "11110000"; //sending tens eg. 40, 50, 60
    char word2[] = "10100000";
    unsigned int dig1 = hum % 10;

    //--- convert word1 ----
    unsigned int temp = round(ceil(hum/5))-4; //numbers 25%-79% converted to 1-11 binnary
    for(int a = 0; a < 4; a++) {
      word1[a+4] = bitRead(temp, 3-a)==0?'0':'1';
    }
//    Serial.println(word1);
  
    //--- convert word2 ----
    if(dig1 > 4) { 
      dig1 = dig1 - 5;
    }
    
    for(int a = 0; a < 4; a++) {
      word2[a+4] = bitRead(dig1,3-a)==0?'0':'1';
    }
//    Serial.println(word2);
    //----------------------
    

   sender.send(word1); 
   delayMicroseconds(5000); 
   sender.send(word2);
}



//ON/Off    00001001
//Hydrostat 00001010
//Output    00001011
//Warm      00001101
//Auto      00001110
//
//
//// humidity data
//
//
//
//25// 1111 0001  1010 0000
//26// 1111       1010 0001
//27// 1111       1010 0010
//28// 1111       1010 0011
//29// 1111       1010 0100
//
//30// 1111 0010  1010 0000
//31// 1111       1010 0001
//32// 1111       1010 0010
//33// 1111       1010 0011
//34// 1111       1010 0100
//
//35// 1111 0011  1010 0000
//36// 1111       1010 0001
//37// 1111       1010 0010
//38// 1111       1010 0011
//39// 1111       1010 0100
//
//40// 1111 0100  1010 0000
//41// 1111       1010 0001
//42// 1111       1010 0010
//43// 1111       1010 0011
//44// 1111       1010 0100
//
//45// 1111 0101  1010 0000
//46// 1111       1010 0001
//47// 1111       1010 0010
//48// 1111       1010 0011
//49// 1111       1010 0100
//
//50// 1111 0110  1010 0000
//51// 1111       1010 0001
//52// 1111       1010 0010
//53// 1111       1010 0011
//54// 1111       1010 0100
//
//55// 1111 0111  1010 0000
//56// 1111 
//57// 1111 
//58// 1111 
//59// 1111 
//
//60// 1111 1000  1010 0000
//
//65// 1111 1001  1010 0000
//
//70// 1111 1010  1010 0000
//
//75// 1111 1011  1010 0000
//76// 1111 1011  1010 0001
//77// 1111 1011  1010 0010
//78// 1111 1011  1010 0011
//79// 1111 1011  1010 0100



















